<!doctype html>
<html lang="en">
	<head>
        
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel='shortcut icon' type='image/x-icon' href='/favicon.ico' />




<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.0.1/tocbot.css">


<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js/styles/github-gist.min.css">


<link rel="stylesheet" href="https://memoex.github.io/css/bootstrap-docs.min.css">


<link rel="stylesheet" href="https://memoex.github.io/css/material.min.css">


<link rel="stylesheet" href="https://memoex.github.io/css/fancybox.min.css">

    </head>
    <body>
        <header class="z-depth-2 navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar">
    <a class="navbar-brand mr-0 mr-md-2" href="https://memoex.github.io//" aria-label="Mr.Blue">
        <span>Mr.Blue</span>
    </a>
    <div class="navbar-nav-scroll">
        <ul class="navbar-nav bd-navbar-nav flex-row">
        
            
                
            
            
            <li class="px-1 nav-item ">
                <a class="nav-link" href="https://memoex.github.io/"><span>Post</span></a>
            </li>
        
            
                
            
            
            <li class="px-1 nav-item active">
                <a class="nav-link" href="https://memoex.github.io/note/"><span>Note</span></a>
            </li>
        
            
                
            
            
            <li class="px-1 nav-item ">
                <a class="nav-link" href="https://memoex.github.io/tags/"><span>Tags</span></a>
            </li>
        
        </ul>
    </div>
</header>


        <div class="container-fluid">
        <div class="row flex-xl-nowrap">
            <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
                
<form class="bd-search d-flex align-items-center">
  <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;"><input type="search" class="form-control ds-input" id="search-input" placeholder="Search..." autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style="position: relative; vertical-align: top;"><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: auto; text-transform: none;"></pre><span class="ds-dropdown-menu" role="listbox" id="algolia-autocomplete-listbox-0" style="position: absolute; top: 100%; z-index: 100; display: none; left: 0px; right: auto;"><div class="ds-dataset-1"></div></span></span>
  <button class="btn btn-link bd-search-docs-toggle d-md-none p-0 ml-3" type="button" data-toggle="collapse" data-target="#bd-docs-nav" aria-controls="bd-docs-nav" aria-expanded="false" aria-label="Toggle docs navigation"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"></path></svg>
</button>
</form>


    








<nav id="bd-docs-nav" class="collapse bd-links">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/2018-03-09-adobe/">
                Adobe
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/bootstrap/">
                Bootstrap
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/course/cs231n/">
                CS231n
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/2018-03-03-css/">
                CSS
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/augmentation/">
                Data Augmentation
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/docker/">
                Docker
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/paper/forward/">
                Forward Learning
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/git/">
                Git
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/course/hinton/">
                Hinton Course
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/hugo/">
                Hugo
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/paper/image/">
                Image
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/js/">
                JavaScript
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/keras/">
                Keras
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/course/brain/">
                MCB80x
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/math/">
                Math
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/matlab/">
                Matlab
                </a>
            </li>
            
            
            <li class="active" >
                <a href="https://memoex.github.io/note/metrics/">
                Metrics
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/python/">
                Python
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/shell/">
                Shell
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/tensorflow/">
                Tensorflow
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/vim/">
                Vim
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/culture/">
                文化
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/road/">
                路
                </a>
            </li>
            
            
            <li class="" >
                <a href="https://memoex.github.io/note/alcohol/">
                酒
                </a>
            </li>
            
        </ul>
    </div>
</nav>

            </div>

            <div class="d-none d-xl-block col-xl-2 bd-toc">
            </div>

            <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5" role="main">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col">
                            <h1 class="bd-title">Metrics</h1>
                            <div class="mb-5">
    <i class="fa fa-calendar fa-lg" aria-hidden="true"></i>
    <time class="px-1 font-weight-bold indigo-text">Mar 6, 2018</time>
    
</div>

                            <div class="bd-content">
                                <p>When I see the terms such as <code>precision</code>, <code>accuracy</code>, <code>training error</code> and so on, they often confused me a lot. To make myself clear, I put them together.</p>

<h2 id="binary-classification">Binary classification</h2>

<p>The following metircs for binary classification will be introduced:</p>

<ol>
<li>accuracy （精度）</li>
<li>error (rate) （错误率）</li>
<li>precision （准确率，查准率）</li>
<li>recall （召回率，查全率）</li>
<li>f1-score</li>
<li>fn-score</li>
</ol>

<p></p>

<p>(中文名称参考《机器学习》，周志华著)<sup class="footnote-ref" id="fnref:zhou"><a rel="footnote" href="#fn:zhou">1</a></sup></p>

<p>First, we should know some terminologies from a table.</p>

<table class="table">
  <tr>
    <th></th>
    <th></th>
    <th colspan="2">Predictiton</th>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td>Positive</td>
    <td>Negative</td>
  </tr>
  <tr>
    <td rowspan="2">Truth</td>
    <td>Positive</td>
    <td>True Positive</td>
    <td>False Negative</td>
  </tr>
  <tr>
    <td>Negative</td>
    <td>False Positive</td>
    <td>True Negative</td>
  </tr>
</table>

<p>The table above is called as a 2x2 contingency table or <code>confusion matrix</code> (混淆矩阵). <sup class="footnote-ref" id="fnref:recall"><a rel="footnote" href="#fn:recall">2</a></sup></p>

<ul>
<li><code>True Positive (TP)</code>: We predict it is positive, and it&rsquo;s right.</li>
<li><code>True Negative (TN)</code>: We predict it is negative, and it&rsquo;s right.</li>
<li><code>False Positive (FP)</code>: We predict it is positive, but it&rsquo;s wrong. In fact, it&rsquo;s negative.</li>
<li><code>False Negative (FN)</code>: We predict it is negative, but it&rsquo;s wrong. In fact, it&rsquo;s positive.</li>
</ul>

<h3 id="accuracy">Accuracy</h3>

<p>Accuracy is <strong>the correctness rate of your prediction</strong>.</p>

<p>The number of your prediction:</p>

<p>$$TP+TN+FP+FN$$</p>

<p>The number of your correct prediction:</p>

<p>$$TP+TN$$</p>

<p>So the accuracy is:</p>

<p>$$ accuracy = \frac{TP+TN}{TP+TN+FP+FN} $$</p>

<h3 id="error-rate">Error (rate)</h3>

<p><code>Error</code> is <strong>the wrong rate of your prediction</strong>.</p>

<p>So according to the formula of accuracy, we can get the error rate.</p>

<p>$$
error = 1 - accuracy = \frac{FP+FN}{TP+TN+FP+FN}
$$</p>

<h3 id="precision">Precision</h3>

<p><code>Precision</code> is the <strong>correctness rate of your positive prediction</strong>.</p>

<p>Try to understand it use this example from Zhou&rsquo;s Machine Learnig:</p>

<blockquote>
<p>Consider you have trained a model to help you choose good watermelons. <br/>
You want to know that the ratio of really good ones in the watermelons choosen by your model. <br/>
That is precision.</p>
</blockquote>

<p>So the number of positive prediction is:</p>

<p>$$TP+FP$$</p>

<p>The number of correct positive prediction is:</p>

<p>$$TP$$</p>

<p>We can get the precision with:</p>

<p>$$ precision = \frac{TP}{TP+FP} $$</p>

<h3 id="recall">Recall</h3>

<p><code>Recall</code> is <strong>the correctness rate of real positive</strong>. The focus is not your prediction, is the cases.</p>

<p>This time we try to understand it with an example I saw in <a href="http://qr.ae/TU86Dq">Quora</a>.</p>

<blockquote>
<p>Consider you have a girl friend and she gave you a birthday surprise ever year in last 10 years.<br/>
However, one day, she asks you: sweetie, do you remember all birthday surprises from me?
You need to recall all 10 surprises or you are in danger.</p>

<p>In this situation, all you need is to remember all 10 surprises correctly, no matter how many times you guess.
You may guess many times before you get the right one of one year
so that you can&rsquo;t get 100% precision. <br/>
But that&rsquo;s ok, finally, you remember all luckily and you get the recall of 100%.</p>
</blockquote>

<p>So the number of really positive cases is:</p>

<p>$$TP+FN$$</p>

<p>The number of correct ones among them is:</p>

<p>$$TP$$</p>

<p>The recall is:</p>

<p>$$ recall = \frac{TP}{TP+FN} $$</p>

<h3 id="f-1-score">\(F_1\) score</h3>

<p>Usually, we can&rsquo;t get high precision and high recall simultaneously.</p>

<blockquote>
<p>Girl friend example again. <br/>
Assume you can&rsquo;t remember all superises clearly.
You need guess to get correct answer.
You have two strategies immediately.</p>

<ol>
<li>Guess as much as you can to make every surprise coverd correctely.</li>
<li>Only tell the surprises you remember and don&rsquo;t say anything more.</li>
</ol>

<p>But I think they will both make you in danger. <br/>
The frist one get a high recall and the second get a high precision.
In fact, you should find a middle point. <br/></p>
</blockquote>

<p><code>F1 score</code> is <strong>the <a href="/note/math/#harmonic-mean">harmonic mean</a> of precision and recall</strong>:</p>

<p>$$
F_1 = \frac{2 \cdot precision \cdot recall}{precision + recall}
$$</p>

<h3 id="f-n-score">\(F_n\) score</h3>

<p>Sometimes we probably think precision is more important than recall or recall is more important.
And \(F_1\) score doesn&rsquo;t satisfy us, so we need more general \(F_n\) socre.</p>

<blockquote>
<p>This could be understand with two examples. <br/></p>

<ol>
<li>Considering spam detecting. It&rsquo;s unberable for us that important mails are detected as spams.
So we want all spams we detected are real spams. So get a high precision is more important.</li>
<li>Considering criminal catching. Police officers won&rsquo;t let every suspicious people go.
So get a high recall is more important.</li>
</ol>
</blockquote>

<p>The definition of \(F_n\) score is:</p>

<p>$$
F_n = (1+\beta^2) \cdot \frac{precision \cdot recall}{\beta^2 \cdot precision + recall}
$$</p>

<p>Two commonly used F measures are the \(F_2\) measure, which weights recall higher than precision.
(More emphasis on \(\frac1{recall}\)). <br/>
And the \( F_{0.5} \) measure, which weighs precision higher than recall.
(More emphasis on \(\frac1{precision}\))<sup class="footnote-ref" id="fnref:f1"><a rel="footnote" href="#fn:f1">3</a></sup></p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:zhou"><a href="http://cs.nju.edu.cn/zhouzh/zhouzh.files/publication/MLbook2016.htm">http://cs.nju.edu.cn/zhouzh/zhouzh.files/publication/MLbook2016.htm</a>
 <a class="footnote-return" href="#fnref:zhou"><sup>[return]</sup></a></li>
<li id="fn:recall"><a href="https://en.wikipedia.org/wiki/Precision_and_recall">https://en.wikipedia.org/wiki/Precision_and_recall</a>
 <a class="footnote-return" href="#fnref:recall"><sup>[return]</sup></a></li>
<li id="fn:f1"><a href="https://en.wikipedia.org/wiki/F1_score">https://en.wikipedia.org/wiki/F1_score</a>
 <a class="footnote-return" href="#fnref:f1"><sup>[return]</sup></a></li>
</ol>
</div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

        <footer class="bd-footer text-muted">
</footer>

        


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.13.0/umd/popper.min.js" integrity="sha256-pS96pU17yq+gVu4KBQJi38VpSuKN7otMrDQprzf/DWY=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js" integrity="sha256-meF2HJJ2Tcruwz3z4XcxYDRMxKprjdruBHc3InmixCQ=" crossorigin="anonymous"></script>
<script>


function tooltip(obj, text){
    obj.tooltip('dispose')
    obj.tooltip({
        title: text,
        boundary: 'viewport',
        trigger: 'hover'
    })
    return obj
}

 
$('pre').each(function(i, l){

    var btn = $('\x3cbutton type=\x22button\x22 class=\x22btn btn-light btn-copycode\x22 data-toggle=\x22tooltip\x22\x3e\n    \x3ci class=\x22fa fa-paste\x22\x3e\x3c\/i\x3e\n\x3c\/button\x3e\n').hide()
    l.prepend(btn[0])

     
    $(l).hover(function(){
        btn.show()
        tooltip(btn, 'Copy to clipboard')
    }, function(){
        btn.fadeOut(200)
    })
})


 
var clipboard = new ClipboardJS('.btn-copycode', {
    target: function(trigger) {
        return trigger.nextElementSibling
    }
})

 
clipboard.on('success', function(e){
    e.clearSelection()
    tooltip($(e.trigger), 'Copied').tooltip('show')
})
</script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/matlab.min.js" integrity="sha256-HHSLUGB2us1mDkYuEDaK0mDZ6T/ugh5qqtGynscVWHU=" crossorigin="anonymous"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.2.1/tocbot.min.js"></script>
<script>
$(function(){
    tocbot.init({
        
        tocSelector: '.bd-toc',
        
        contentSelector: 'main',
        
        headingSelector: 'h2, h3, h4',
        listClass: 'toc-list',
        listItemClass: 'toc-entry',
        linkClass: 'font-weight-normal',
        activeLinkClass: 'active',
        collapseDepth: 6,
    });
});
</script>



<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js"></script>

    </body>
</html>
